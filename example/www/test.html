<!doctype html>
<html>
<script type='text/javascript' src='lib/cajon/cajon.js'></script>
<script>
  require.config({
    baseUrl: '.',
    paths: {
      rework: 'lib/rework/rework',
      'json': 'lib/requirejs-plugins/src/json'
    },
    map: {
      '*': {
        'css': 'require-css/css'
      } 
    },
    // packages: [{
    //   name: 'css',
    //   location: 'require-css'
    // }],
    css: {
      transformEach: [{
        // can run async
        requirejs: 'tools/transform-css',
        // node module must run synchronously
        node: 'TODO'
      },{
        requirejs: 'tools/prefix-css-requirejs',
        node: 'tools/prefix-css-node'
      }]
    },
    shim: {
      rework: {
        exports: 'rework'
      }
    }
  });
</script>

<body>
<h1>test</h1>
</body>


<script>
  require(['app'], function(){});
  require(['popup'], function(popupHTML) {
    var div = document.createElement('div');
    div.innerHTML = popupHTML;
    document.body.appendChild(div);
    alert(div.childNodes[0].offsetWidth == 340 ? 'Style query passed' : 'Style query failed');
  });
</script>
